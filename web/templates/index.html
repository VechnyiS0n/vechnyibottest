<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ü–∞–Ω–µ–ª—å —É—á–∏—Ç–µ–ª—è</title>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –æ–±—â–∏–π CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<!-- ===== –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å ===== -->
<header class="top-bar">
    <h1>üìä –ü–∞–Ω–µ–ª—å —É—á–∏—Ç–µ–ª—è</h1>

    <!-- –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º—ã -->
    <button id="theme-toggle">üåô</button>
</header>

<!-- ===== –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è ===== -->
<section class="stats">
    <div class="stat-card">
        <h3>üìö –£—Ä–æ–∫–æ–≤</h3>
        <p>{{ lessons|length }}</p>
    </div>

    <div class="stat-card">
        <h3>üìù –í—Å–µ–≥–æ –æ—Ü–µ–Ω–æ–∫</h3>
        <p>{{ total_feedback }}</p>
    </div>

    <div class="stat-card">
        <h3>‚≠ê –°—Ä–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞</h3>
        <p>{{ avg_rating }}</p>
    </div>
</section>

<!-- ===== –°–ø–∏—Å–æ–∫ —É—Ä–æ–∫–æ–≤ ===== -->
<section class="lessons">
    <h2>–°–ø–∏—Å–æ–∫ —É—Ä–æ–∫–æ–≤</h2>

    {% if lessons %}
        {% for lesson in lessons %}
            <a href="{{ url_for('lesson_page', lesson_id=lesson.id) }}" class="lesson-card">
                <div>
                    <h3>{{ lesson.title }}</h3>
                    <small>–ö–æ–¥ —É—Ä–æ–∫–∞: <b>{{ lesson.code }}</b></small>
                </div>

                <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–±–ª–µ–º -->
                {% if lesson.problem %}
                    <span class="badge problem">‚ö† –ü—Ä–æ–±–ª–µ–º–Ω—ã–π</span>
                {% else %}
                    <span class="badge ok">‚úì –í—Å—ë —Ö–æ—Ä–æ—à–æ</span>
                {% endif %}
            </a>
        {% endfor %}
    {% else %}
        <!-- –ü—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ -->
        <div class="empty">
            üì≠ –ü–æ–∫–∞ –Ω–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —É—Ä–æ–∫–æ–≤<br>
            –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—ã–π —É—Ä–æ–∫, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å —Å–±–æ—Ä –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
        </div>
    {% endif %}
</section>

<footer>
    –ê–Ω–æ–Ω–∏–º–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ—Ü–µ–Ω–∫–∏ —É—Ä–æ–∫–æ–≤ ‚Ä¢ –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç
</footer>

<!-- ===== JS –¥–ª—è —Ç–µ–º—ã ===== -->
<script>
    const toggleBtn = document.getElementById("theme-toggle");

    // –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    if (localStorage.getItem("theme") === "dark") {
        document.body.classList.add("dark");
        toggleBtn.textContent = "‚òÄÔ∏è";
    }

    toggleBtn.onclick = () => {
        document.body.classList.toggle("dark");

        if (document.body.classList.contains("dark")) {
            localStorage.setItem("theme", "dark");
            toggleBtn.textContent = "‚òÄÔ∏è";
        } else {
            localStorage.setItem("theme", "light");
            toggleBtn.textContent = "üåô";
        }
    };
</script>

</body>
</html>
